/**
 * Date picker
 * Author: Stefan Petre www.eyecon.ro
 * 
 * Dual licensed under the MIT and GPL licenses
 */
(function(g){var r=function(){var n={years:"datepickerViewYears",moths:"datepickerViewMonths",days:"datepickerViewDays"},q={wrapper:'<div class="datepicker"><div class="datepickerBorderT" /><div class="datepickerBorderB" /><div class="datepickerBorderL" /><div class="datepickerBorderR" /><div class="datepickerBorderTL" /><div class="datepickerBorderTR" /><div class="datepickerBorderBL" /><div class="datepickerBorderBR" /><div class="datepickerContainer"><table cellspacing="0" cellpadding="0"><tbody><tr></tr></tbody></table></div></div>',
head:["<td>",'<table cellspacing="0" cellpadding="0">',"<thead>","<tr>",'<th class="datepickerGoPrev"><a href="#"><span><%=prev%></span></a></th>','<th colspan="6" class="datepickerMonth"><a href="#"><span></span></a></th>','<th class="datepickerGoNext"><a href="#"><span><%=next%></span></a></th>',"</tr>",'<tr class="datepickerDoW">',"<th><span><%=week%></span></th>","<th><span><%=day1%></span></th>","<th><span><%=day2%></span></th>","<th><span><%=day3%></span></th>","<th><span><%=day4%></span></th>",
"<th><span><%=day5%></span></th>","<th><span><%=day6%></span></th>","<th><span><%=day7%></span></th>","</tr>","</thead>","</table></td>"],space:'<td class="datepickerSpace"><div></div></td>',days:['<tbody class="datepickerDays">',"<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[0].week%></span></a></th>','<td class="<%=weeks[0].days[0].classname%>"><a href="#"><span><%=weeks[0].days[0].text%></span></a></td>','<td class="<%=weeks[0].days[1].classname%>"><a href="#"><span><%=weeks[0].days[1].text%></span></a></td>',
'<td class="<%=weeks[0].days[2].classname%>"><a href="#"><span><%=weeks[0].days[2].text%></span></a></td>','<td class="<%=weeks[0].days[3].classname%>"><a href="#"><span><%=weeks[0].days[3].text%></span></a></td>','<td class="<%=weeks[0].days[4].classname%>"><a href="#"><span><%=weeks[0].days[4].text%></span></a></td>','<td class="<%=weeks[0].days[5].classname%>"><a href="#"><span><%=weeks[0].days[5].text%></span></a></td>','<td class="<%=weeks[0].days[6].classname%>"><a href="#"><span><%=weeks[0].days[6].text%></span></a></td>',
"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[1].week%></span></a></th>','<td class="<%=weeks[1].days[0].classname%>"><a href="#"><span><%=weeks[1].days[0].text%></span></a></td>','<td class="<%=weeks[1].days[1].classname%>"><a href="#"><span><%=weeks[1].days[1].text%></span></a></td>','<td class="<%=weeks[1].days[2].classname%>"><a href="#"><span><%=weeks[1].days[2].text%></span></a></td>','<td class="<%=weeks[1].days[3].classname%>"><a href="#"><span><%=weeks[1].days[3].text%></span></a></td>',
'<td class="<%=weeks[1].days[4].classname%>"><a href="#"><span><%=weeks[1].days[4].text%></span></a></td>','<td class="<%=weeks[1].days[5].classname%>"><a href="#"><span><%=weeks[1].days[5].text%></span></a></td>','<td class="<%=weeks[1].days[6].classname%>"><a href="#"><span><%=weeks[1].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[2].week%></span></a></th>','<td class="<%=weeks[2].days[0].classname%>"><a href="#"><span><%=weeks[2].days[0].text%></span></a></td>',
'<td class="<%=weeks[2].days[1].classname%>"><a href="#"><span><%=weeks[2].days[1].text%></span></a></td>','<td class="<%=weeks[2].days[2].classname%>"><a href="#"><span><%=weeks[2].days[2].text%></span></a></td>','<td class="<%=weeks[2].days[3].classname%>"><a href="#"><span><%=weeks[2].days[3].text%></span></a></td>','<td class="<%=weeks[2].days[4].classname%>"><a href="#"><span><%=weeks[2].days[4].text%></span></a></td>','<td class="<%=weeks[2].days[5].classname%>"><a href="#"><span><%=weeks[2].days[5].text%></span></a></td>',
'<td class="<%=weeks[2].days[6].classname%>"><a href="#"><span><%=weeks[2].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[3].week%></span></a></th>','<td class="<%=weeks[3].days[0].classname%>"><a href="#"><span><%=weeks[3].days[0].text%></span></a></td>','<td class="<%=weeks[3].days[1].classname%>"><a href="#"><span><%=weeks[3].days[1].text%></span></a></td>','<td class="<%=weeks[3].days[2].classname%>"><a href="#"><span><%=weeks[3].days[2].text%></span></a></td>',
'<td class="<%=weeks[3].days[3].classname%>"><a href="#"><span><%=weeks[3].days[3].text%></span></a></td>','<td class="<%=weeks[3].days[4].classname%>"><a href="#"><span><%=weeks[3].days[4].text%></span></a></td>','<td class="<%=weeks[3].days[5].classname%>"><a href="#"><span><%=weeks[3].days[5].text%></span></a></td>','<td class="<%=weeks[3].days[6].classname%>"><a href="#"><span><%=weeks[3].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[4].week%></span></a></th>',
'<td class="<%=weeks[4].days[0].classname%>"><a href="#"><span><%=weeks[4].days[0].text%></span></a></td>','<td class="<%=weeks[4].days[1].classname%>"><a href="#"><span><%=weeks[4].days[1].text%></span></a></td>','<td class="<%=weeks[4].days[2].classname%>"><a href="#"><span><%=weeks[4].days[2].text%></span></a></td>','<td class="<%=weeks[4].days[3].classname%>"><a href="#"><span><%=weeks[4].days[3].text%></span></a></td>','<td class="<%=weeks[4].days[4].classname%>"><a href="#"><span><%=weeks[4].days[4].text%></span></a></td>',
'<td class="<%=weeks[4].days[5].classname%>"><a href="#"><span><%=weeks[4].days[5].text%></span></a></td>','<td class="<%=weeks[4].days[6].classname%>"><a href="#"><span><%=weeks[4].days[6].text%></span></a></td>',"</tr>","<tr>",'<th class="datepickerWeek"><a href="#"><span><%=weeks[5].week%></span></a></th>','<td class="<%=weeks[5].days[0].classname%>"><a href="#"><span><%=weeks[5].days[0].text%></span></a></td>','<td class="<%=weeks[5].days[1].classname%>"><a href="#"><span><%=weeks[5].days[1].text%></span></a></td>',
'<td class="<%=weeks[5].days[2].classname%>"><a href="#"><span><%=weeks[5].days[2].text%></span></a></td>','<td class="<%=weeks[5].days[3].classname%>"><a href="#"><span><%=weeks[5].days[3].text%></span></a></td>','<td class="<%=weeks[5].days[4].classname%>"><a href="#"><span><%=weeks[5].days[4].text%></span></a></td>','<td class="<%=weeks[5].days[5].classname%>"><a href="#"><span><%=weeks[5].days[5].text%></span></a></td>','<td class="<%=weeks[5].days[6].classname%>"><a href="#"><span><%=weeks[5].days[6].text%></span></a></td>',
"</tr>","</tbody>"],months:['<tbody class="<%=className%>">',"<tr>",'<td colspan="2"><a href="#"><span><%=data[0]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[1]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[2]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[3]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[4]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[5]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[6]%></span></a></td>',
'<td colspan="2"><a href="#"><span><%=data[7]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[8]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[9]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[10]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[11]%></span></a></td>',"</tr>","</tbody>"]},A={flat:false,starts:1,prev:"&#9664;",next:"&#9654;",lastSel:false,mode:"single",view:"days",calendars:1,format:"Y-m-d",position:"bottom",
eventName:"click",onRender:function(){return{}},onChange:function(){return true},onShow:function(){return true},onBeforeShow:function(){return true},onHide:function(){return true},locale:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],
monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekMin:"wk"}},s=function(a){var b=g(a).data("datepicker");a=g(a);var d=Math.floor(b.calendars/2),c,e,f,i,l=0,h,k,m,o,j;a.find("td>table tbody").remove();for(var p=0;p<b.calendars;p++){c=new Date(b.current);c.addMonths(-d+p);j=a.find("table").eq(p+1);switch(j[0].className){case "datepickerViewDays":f=u(c,"B, Y");break;case "datepickerViewMonths":f=c.getFullYear();break;case "datepickerViewYears":f=c.getFullYear()-
6+" - "+(c.getFullYear()+5);break}j.find("thead tr:first th:eq(1) span").text(f);f=c.getFullYear()-6;e={data:[],className:"datepickerYears"};for(i=0;i<12;i++)e.data.push(f+i);o=tmpl(q.months.join(""),e);c.setDate(1);e={weeks:[],test:10};i=c.getMonth();f=(c.getDay()-b.starts)%7;c.addDays(-(f+(f<0?7:0)));for(l=0;l<42;){k=parseInt(l/7,10);m=l%7;if(!e.weeks[k]){h=c.getWeekNumber();e.weeks[k]={week:h,days:[]}}e.weeks[k].days[m]={text:c.getDate(),classname:[]};i!=c.getMonth()&&e.weeks[k].days[m].classname.push("datepickerNotInMonth");
c.getDay()==0&&e.weeks[k].days[m].classname.push("datepickerSunday");c.getDay()==6&&e.weeks[k].days[m].classname.push("datepickerSaturday");h=b.onRender(c);var v=c.valueOf();if(h.selected||b.date==v||g.inArray(v,b.date)>-1||b.mode=="range"&&v>=b.date[0]&&v<=b.date[1])e.weeks[k].days[m].classname.push("datepickerSelected");h.disabled&&e.weeks[k].days[m].classname.push("datepickerDisabled");h.className&&e.weeks[k].days[m].classname.push(h.className);e.weeks[k].days[m].classname=e.weeks[k].days[m].classname.join(" ");
l++;c.addDays(1)}o=tmpl(q.days.join(""),e)+o;e={data:b.locale.monthsShort,className:"datepickerMonths"};o=tmpl(q.months.join(""),e)+o;j.append(o)}},t=function(a,b){if(a.constructor==Date)return new Date(a);a=a.split(/\W+/);b=b.split(/\W+/);for(var d,c,e,f,i,l=new Date,h=0;h<a.length;h++)switch(b[h]){case "d":case "e":d=parseInt(a[h],10);break;case "m":c=parseInt(a[h],10)-1;break;case "Y":case "y":e=parseInt(a[h],10);e+=e>100?0:e<29?2E3:1900;break;case "H":case "I":case "k":case "l":f=parseInt(a[h],
10);break;case "P":case "p":if(/pm/i.test(a[h])&&f<12)f+=12;else if(/am/i.test(a[h])&&f>=12)f-=12;break;case "M":i=parseInt(a[h],10);break}return new Date(e===undefined?l.getFullYear():e,c===undefined?l.getMonth():c,d===undefined?l.getDate():d,f===undefined?l.getHours():f,i===undefined?l.getMinutes():i,0)},u=function(a,b){var d=a.getMonth(),c=a.getDate(),e=a.getFullYear();a.getWeekNumber();var f=a.getDay(),i=a.getHours(),l=i>=12,h=l?i-12:i,k=a.getDayOfYear();if(h==0)h=12;var m=a.getMinutes(),o=a.getSeconds();
b=b.split("");for(var j,p=0;p<b.length;p++){j=b[p];switch(b[p]){case "a":j=a.getDayName();break;case "A":j=a.getDayName(true);break;case "b":j=a.getMonthName();break;case "B":j=a.getMonthName(true);break;case "C":j=1+Math.floor(e/100);break;case "d":j=c<10?"0"+c:c;break;case "e":j=c;break;case "H":j=i<10?"0"+i:i;break;case "I":j=h<10?"0"+h:h;break;case "j":j=k<100?k<10?"00"+k:"0"+k:k;break;case "k":j=i;break;case "l":j=h;break;case "m":j=d<9?"0"+(1+d):1+d;break;case "M":j=m<10?"0"+m:m;break;case "p":case "P":j=
l?"PM":"AM";break;case "s":j=Math.floor(a.getTime()/1E3);break;case "S":j=o<10?"0"+o:o;break;case "u":j=f+1;break;case "w":j=f;break;case "y":j=(""+e).substr(2,2);break;case "Y":j=e;break}b[p]=j}return b.join("")},B=function(a){if(!Date.prototype.tempDate){Date.prototype.tempDate=null;Date.prototype.months=a.months;Date.prototype.monthsShort=a.monthsShort;Date.prototype.days=a.days;Date.prototype.daysShort=a.daysShort;Date.prototype.getMonthName=function(b){return this[b?"months":"monthsShort"][this.getMonth()]};
Date.prototype.getDayName=function(b){return this[b?"days":"daysShort"][this.getDay()]};Date.prototype.addDays=function(b){this.setDate(this.getDate()+b);this.tempDate=this.getDate()};Date.prototype.addMonths=function(b){if(this.tempDate==null)this.tempDate=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+b);this.setDate(Math.min(this.tempDate,this.getMaxDays()))};Date.prototype.addYears=function(b){if(this.tempDate==null)this.tempDate=this.getDate();this.setDate(1);this.setFullYear(this.getFullYear()+
b);this.setDate(Math.min(this.tempDate,this.getMaxDays()))};Date.prototype.getMaxDays=function(){var b=new Date(Date.parse(this)),d=28,c;c=b.getMonth();for(d=28;b.getMonth()==c;){d++;b.setDate(d)}return d-1};Date.prototype.getFirstDay=function(){var b=new Date(Date.parse(this));b.setDate(1);return b.getDay()};Date.prototype.getWeekNumber=function(){var b=new Date(this);b.setDate(b.getDate()-(b.getDay()+6)%7+3);var d=b.valueOf();b.setMonth(0);b.setDate(4);return Math.round((d-b.valueOf())/6048E5)+
1};Date.prototype.getDayOfYear=function(){var b=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),d=new Date(this.getFullYear(),0,0,0,0,0);return Math.floor((b-d)/24*60*60*1E3)}}},w=function(a){var b=g(a).data("datepicker"),d=g("#"+b.id);if(!b.extraHeight){a=g(a).find("div");b.extraHeight=a.get(0).offsetHeight+a.get(1).offsetHeight;b.extraWidth=a.get(2).offsetWidth+a.get(3).offsetWidth}var c=d.find("table:first").get(0);a=c.offsetWidth;c=c.offsetHeight;d.css({width:a+b.extraWidth+
"px",height:c+b.extraHeight+"px"}).find("div.datepickerContainer").css({width:a+"px",height:c+"px"})},C=function(a){if(g(a.target).is("span"))a.target=a.target.parentNode;var b=g(a.target);if(b.is("a")){a.target.blur();if(b.hasClass("datepickerDisabled"))return false;var d=g(this).data("datepicker");a=b.parent();var c=a.parent().parent().parent(),e=g("table",this).index(c.get(0))-1,f=new Date(d.current),i=false,l=false;if(a.is("th"))if(a.hasClass("datepickerWeek")&&d.mode=="range"&&!a.next().hasClass("datepickerDisabled")){var h=
parseInt(a.next().text(),10);f.addMonths(e-Math.floor(d.calendars/2));if(a.next().hasClass("datepickerNotInMonth"))f.addMonths(h>15?-1:1);f.setDate(h);d.date[0]=f.setHours(0,0,0,0).valueOf();f.setHours(23,59,59,0);f.addDays(6);d.date[1]=f.valueOf();i=l=true;d.lastSel=false}else if(a.hasClass("datepickerMonth")){f.addMonths(e-Math.floor(d.calendars/2));switch(c.get(0).className){case "datepickerViewDays":c.get(0).className="datepickerViewMonths";b.find("span").text(f.getFullYear());break;case "datepickerViewMonths":c.get(0).className=
"datepickerViewYears";b.find("span").text(f.getFullYear()-6+" - "+(f.getFullYear()+5));break;case "datepickerViewYears":c.get(0).className="datepickerViewDays";b.find("span").text(u(f,"B, Y"));break}}else{if(a.parent().parent().is("thead")){switch(c.get(0).className){case "datepickerViewDays":d.current.addMonths(a.hasClass("datepickerGoPrev")?-1:1);break;case "datepickerViewMonths":d.current.addYears(a.hasClass("datepickerGoPrev")?-1:1);break;case "datepickerViewYears":d.current.addYears(a.hasClass("datepickerGoPrev")?
-12:12);break}l=true}}else if(a.is("td")&&!a.hasClass("datepickerDisabled")){switch(c.get(0).className){case "datepickerViewMonths":d.current.setMonth(c.find("tbody.datepickerMonths td").index(a));d.current.setFullYear(parseInt(c.find("thead th.datepickerMonth span").text(),10));d.current.addMonths(Math.floor(d.calendars/2)-e);c.get(0).className="datepickerViewDays";break;case "datepickerViewYears":d.current.setFullYear(parseInt(b.text(),10));c.get(0).className="datepickerViewMonths";break;default:h=
parseInt(b.text(),10);f.addMonths(e-Math.floor(d.calendars/2));if(a.hasClass("datepickerNotInMonth"))f.addMonths(h>15?-1:1);f.setDate(h);switch(d.mode){case "multiple":h=f.setHours(0,0,0,0).valueOf();g.inArray(h,d.date)>-1?g.each(d.date,function(k,m){if(m==h){d.date.splice(k,1);return false}}):d.date.push(h);break;case "range":d.lastSel||(d.date[0]=f.setHours(0,0,0,0).valueOf());h=f.setHours(23,59,59,0).valueOf();if(h<d.date[0]){d.date[1]=d.date[0]+86399E3;d.date[0]=h-86399E3}else d.date[1]=h;d.lastSel=
!d.lastSel;break;default:d.date=f.valueOf();break}break}i=l=true}l&&s(this);i&&d.onChange.apply(this,x(d))}return false},x=function(a){var b;if(a.mode=="single"){b=new Date(a.date);return[u(b,a.format),b,a.el]}else{b=[[],[],a.el];g.each(a.date,function(d,c){d=new Date(c);b[0].push(u(d,a.format));b[1].push(d)});return b}},D=function(){var a=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(a?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(a?document.documentElement.scrollTop:
document.body.scrollTop),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(a?document.documentElement.clientHeight:document.body.clientHeight)}},E=function(a,b,d){if(a==b)return true;if(a.contains)return a.contains(b);if(a.compareDocumentPosition)return!!(a.compareDocumentPosition(b)&16);for(b=b.parentNode;b&&b!=d;){if(b==a)return true;b=b.parentNode}return false},z=function(){var a=g("#"+g(this).data("datepickerId"));if(!a.is(":visible")){var b=
a.get(0);s(b);var d=a.data("datepicker");d.onBeforeShow.apply(this,[a.get(0)]);var c=g(this).offset(),e=D(),f=c.top,i=c.left;g.curCSS(b,"display");a.css({visibility:"hidden",display:"block"});w(b);switch(d.position){case "top":f-=b.offsetHeight;break;case "left":i-=b.offsetWidth;break;case "right":i+=this.offsetWidth;break;case "bottom":f+=this.offsetHeight;break}if(f+b.offsetHeight>e.t+e.h)f=c.top-b.offsetHeight;if(f<e.t)f=c.top+this.offsetHeight+b.offsetHeight;if(i+b.offsetWidth>e.l+e.w)i=c.left-
b.offsetWidth;if(i<e.l)i=c.left+this.offsetWidth;a.css({visibility:"visible",display:"block",top:f+"px",left:i+"px"});d.onShow.apply(this,[a.get(0)])!=false&&a.show();g(document).bind("mousedown",{cal:a,trigger:this},y)}return false},y=function(a){if(a.target!=a.data.trigger&&!E(a.data.cal.get(0),a.target,a.data.cal.get(0))){a.data.cal.data("datepicker").onHide.apply(this,[a.data.cal.get(0)])!=false&&a.data.cal.hide();g(document).unbind("mousedown",y)}};return{init:function(a){a=g.extend({},A,a||
{});B(a.locale);a.calendars=Math.max(1,parseInt(a.calendars,10)||1);a.mode=/single|multiple|range/.test(a.mode)?a.mode:"single";return this.each(function(){if(!g(this).data("datepicker")){a.el=this;if(a.date.constructor==String){a.date=t(a.date,a.format);a.date.setHours(0,0,0,0)}if(a.mode!="single")if(a.date.constructor!=Array){a.date=[a.date.valueOf()];a.mode=="range"&&a.date.push((new Date(a.date[0])).setHours(23,59,59,0).valueOf())}else{for(var b=0;b<a.date.length;b++)a.date[b]=t(a.date[b],a.format).setHours(0,
0,0,0).valueOf();if(a.mode=="range")a.date[1]=(new Date(a.date[1])).setHours(23,59,59,0).valueOf()}else a.date=a.date.valueOf();a.current=a.current?t(a.current,a.format):new Date;a.current.setDate(1);a.current.setHours(0,0,0,0);b="datepicker_"+parseInt(Math.random()*1E3);var d;a.id=b;g(this).data("datepickerId",a.id);var c=g(q.wrapper).attr("id",b).bind("click",C).data("datepicker",a);a.className&&c.addClass(a.className);var e="";for(b=0;b<a.calendars;b++){d=a.starts;if(b>0)e+=q.space;e+=tmpl(q.head.join(""),
{week:a.locale.weekMin,prev:a.prev,next:a.next,day1:a.locale.daysMin[d++%7],day2:a.locale.daysMin[d++%7],day3:a.locale.daysMin[d++%7],day4:a.locale.daysMin[d++%7],day5:a.locale.daysMin[d++%7],day6:a.locale.daysMin[d++%7],day7:a.locale.daysMin[d++%7]})}c.find("tr:first").append(e).find("table").addClass(n[a.view]);s(c.get(0));if(a.flat){c.appendTo(this).show().css("position","relative");w(c.get(0))}else{c.appendTo(document.body);g(this).bind(a.eventName,z)}}})},showPicker:function(){return this.each(function(){g(this).data("datepickerId")&&
z.apply(this)})},hidePicker:function(){return this.each(function(){g(this).data("datepickerId")&&g("#"+g(this).data("datepickerId")).hide()})},setDate:function(a,b){return this.each(function(){if(g(this).data("datepickerId")){var d=g("#"+g(this).data("datepickerId")),c=d.data("datepicker");c.date=a;if(c.date.constructor==String){c.date=t(c.date,c.format);c.date.setHours(0,0,0,0)}if(c.mode!="single")if(c.date.constructor!=Array){c.date=[c.date.valueOf()];c.mode=="range"&&c.date.push((new Date(c.date[0])).setHours(23,
59,59,0).valueOf())}else{for(var e=0;e<c.date.length;e++)c.date[e]=t(c.date[e],c.format).setHours(0,0,0,0).valueOf();if(c.mode=="range")c.date[1]=(new Date(c.date[1])).setHours(23,59,59,0).valueOf()}else c.date=c.date.valueOf();if(b)c.current=new Date(c.mode!="single"?c.date[0]:c.date);s(d.get(0))}})},getDate:function(a){if(this.size()>0)return x(g("#"+g(this).data("datepickerId")).data("datepicker"))[a?0:1]},clear:function(){return this.each(function(){if(g(this).data("datepickerId")){var a=g("#"+
g(this).data("datepickerId")),b=a.data("datepicker");if(b.mode!="single"){b.date=[];s(a.get(0))}}})},fixLayout:function(){return this.each(function(){if(g(this).data("datepickerId")){var a=g("#"+g(this).data("datepickerId"));a.data("datepicker").flat&&w(a.get(0))}})}}}();g.fn.extend({DatePicker:r.init,DatePickerHide:r.hidePicker,DatePickerShow:r.showPicker,DatePickerSetDate:r.setDate,DatePickerGetDate:r.getDate,DatePickerClear:r.clear,DatePickerLayout:r.fixLayout})})(jQuery);
(function(){var g={};this.tmpl=function r(n,q){n=!/\W/.test(n)?(g[n]=g[n]||r(document.getElementById(n).innerHTML)):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return q?n(q):n}})();
